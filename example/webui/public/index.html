<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Semantic Chunking UI</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1><a href="/">üç± Semantic Chunking UI</a></h1>
        
        <div class="content-wrapper">
            <div class="form-wrapper">
                <form id="chunkForm">
                    <div class="form-content">
                        <div class="form-group">
                            <label for="documentName">Document Name:</label>
                            <input type="text" id="documentName" name="documentName" value="sample text" required>
                        </div>

                        <div class="form-group">
                            <label for="documentText">Text to Chunk:</label>
                            <textarea id="documentText" name="documentText" required></textarea>
                        </div>

                        <div class="form-section">
                            <h3>Basic Settings</h3>
                            <div class="form-group">
                                <label for="maxTokenSize">Max Token Size (50-2500):</label>
                                <input type="range" id="maxTokenSize" name="maxTokenSize" min="50" max="2500" step="25" value="500">
                                <span class="value-display">500</span>
                            </div>

                            <div class="form-group">
                                <label for="similarityThreshold">Similarity Threshold (0.1-1.0):</label>
                                <input type="range" id="similarityThreshold" name="similarityThreshold" min="0.1" max="1.0" step="0.05" value="0.5">
                                <span class="value-display">0.5</span>
                            </div>

                            <div class="form-group">
                                <label for="numSimilaritySentencesLookahead">Similarity Sentences Lookahead (1-10):</label>
                                <input type="range" id="numSimilaritySentencesLookahead" name="numSimilaritySentencesLookahead" min="1" max="10" step="1" value="2">
                                <span class="value-display">2</span>
                            </div>
                            <div class="form-row">
                                <div class="form-group">
                                    <label class="white-space--nowrap" for="combineChunks">Combine Chunks:</label>
                                    <label class="switch">
                                        <input type="checkbox" id="combineChunks" name="combineChunks" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
                                
                                <div class="form-group depends-on-combine-chunks">
                                    <label for="combineChunksSimilarityThreshold">Combine Chunks Similarity Threshold (0.1-1.0):</label>
                                    <input type="range" id="combineChunksSimilarityThreshold" name="combineChunksSimilarityThreshold" min="0.1" max="1.0" step="0.05" value="0.5">
                                    <span class="value-display">0.5</span>
                                </div>
                            </div>
                        </div>

                        <div class="form-section depends-on-combine-chunks">
                            <h3>Advanced Settings</h3>
                            <div class="form-group depends-on-combine-chunks">
                                <label for="dynamicThresholdLowerBound">Dynamic Threshold Lower Bound (0.1-1.0):</label>
                                <input type="range" id="dynamicThresholdLowerBound" name="dynamicThresholdLowerBound" min="0.1" max="1.0" step="0.05" value="0.4">
                                <span class="value-display">0.4</span>
                            </div>

                            <div class="form-group depends-on-combine-chunks">
                                <label for="dynamicThresholdUpperBound">Dynamic Threshold Upper Bound (0.1-1.0):</label>
                                <input type="range" id="dynamicThresholdUpperBound" name="dynamicThresholdUpperBound" min="0.1" max="1.0" step="0.05" value="0.8">
                                <span class="value-display">0.8</span>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>Model Settings</h3>
                            <div class="form-group">
                                <label for="onnxEmbeddingModel">Embedding Model:</label>
                                <select id="onnxEmbeddingModel" name="onnxEmbeddingModel">
                                    <option value="nomic-ai/nomic-embed-text-v1.5">nomic-ai/nomic-embed-text-v1.5</option>
                                    <option value="Xenova/all-MiniLM-L6-v2">Xenova/all-MiniLM-L6-v2</option>
                                    <option value="Xenova/paraphrase-multilingual-MiniLM-L12-v2">Xenova/paraphrase-multilingual-MiniLM-L12-v2</option>
                                    <option value="Xenova/all-distilroberta-v1">Xenova/all-distilroberta-v1</option>
                                    <option value="BAAI/bge-base-en-v1.5">BAAI/bge-base-en-v1.5</option>
                                    <option value="BAAI/bge-small-en-v1.5">BAAI/bge-small-en-v1.5</option>
                                </select>
                            </div>

                            <div class="form-group">
                                <label for="onnxEmbeddingModelQuantized">Use Quantized Model:</label>
                                <label class="switch">
                                    <input type="checkbox" id="onnxEmbeddingModelQuantized" name="onnxEmbeddingModelQuantized" checked>
                                    <span class="slider"></span>
                                </label>
                            </div>
                        </div>

                        <div class="form-section">
                            <h3>Output Settings</h3>
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="returnTokenLength">Return Token Length:</label>
                                    <label class="switch">
                                        <input type="checkbox" id="returnTokenLength" name="returnTokenLength" checked>
                                        <span class="slider"></span>
                                    </label>
                                </div>
    
                                <div class="form-group">
                                    <label for="returnEmbedding">Return Embedding:</label>
                                    <label class="switch">
                                        <input type="checkbox" id="returnEmbedding" name="returnEmbedding">
                                        <span class="slider"></span>
                                    </label>
                                </div>
                            </div>

                            <div class="form-group">
                                <label for="chunkPrefix">Chunk Prefix:</label>
                                <input type="text" id="chunkPrefix" name="chunkPrefix" placeholder="e.g., search_document, search_query, etc.">
                            </div>
                        </div>

                        <!-- Hidden inputs -->
                        <input type="hidden" id="logging" name="logging" value="false">
                        <input type="hidden" id="localModelPath" name="localModelPath" value="./models">
                        <input type="hidden" id="modelCacheDir" name="modelCacheDir" value="./models">
                    </div>
                    
                    <div class="form-footer">
                        <button type="submit">Process Text</button>
                    </div>
                </form>
            </div>

            <div class="results-wrapper">
                <div id="results" class="results-container">
                    <div class="results-content">
                        <div class="results-header">
                            <h2>Results</h2>
                            <div class="results-stats">
                                <span id="chunkCount"></span>
                                <span id="avgTokenLength"></span>
                            </div>
                        </div>
                        <pre id="resultsJson"></pre>
                    </div>
                    <div class="results-footer">
                        <button id="downloadButton" class="download-button">Download Results</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <script type="module" src="main.js"></script>
</body>
</html> 